fn main() {
    // Nested unnamed blocks, break outer from inner
    :outer {
        {
            print "A" // expect A
            break :outer
            print "B"
        }
        print "C"
    }
    print "D" // expect D

    // Labelled block with value, break inside inner block
    var x = :val {
        {
            break :val 42
        }
        break :val 99
    }
    print x // expect 42

   // Conditional break in labelled block
    var y = :val {
        if true do break :val 10
        else break :val 20
    }
    print y // expect 10

    var n = :num {
        if false do break :num 5
        print "fallthrough" // expect fallthrough
        break :num 7
    }
    print n // expect 7

    // Multiple levels of labels
    :a {
        :b {
            :c {
                print "start" // expect start
                break :b
                print "never"
            }
            print "after c"
        }
        print "after b" // expect after b
    }
    print "after a"

    // If then with do
    var z = if true do :b { 
        {
            {
                break :b 1
            }
        }
        break 4
    } else 3
    print z // expect 1

    // If then without do
    z = if true :b {
        {
            break :b 6
        }
        break 0 // mandatory for now
    } else :b { break :b 8 }
    print z // expect 6

    // If else
    z = if false :b {
        {
            break :b 6
        }
        break 0 // mandatory for now
    } else :b { break :b 8 }
    print z // expect 8

    // While
    var i = 0
    while true :b {
        if i == 5 do break
        i += 1
    }
    print i // expect 5
}
