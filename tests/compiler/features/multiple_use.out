//---- math ----

-- len --
get_local_REG index 0
OP_GET_FIELD index 0
get_local_REG index 0
OP_GET_FIELD index 1
add_int
OP_RETURN

-- introduce --
constant index 0, value This is a mathematical module
print
ret_naked

-- getVecFromPos --
OP_GET_GLOBAL index 0, <structure Vec2>
get_local index 1
get_local index 2
OP_STRUCT_LIT index 2
OP_RETURN

-- getInt --
constant index 0, value 12
OP_RETURN

-- getIntDef --
constant index 0, value 12
OP_RETURN

-- global scope --
OP_EXIT_REPL

//---- geom ----

-- move --
get_local_REG index 0
OP_GET_FIELD index 0
get_local index 1
add_int
get_local_REG index 0
OP_GET_FIELD_REG index 0
OP_REG_ASSIGN
get_local_REG index 0
OP_GET_FIELD index 1
get_local index 1
add_int
get_local_REG index 0
OP_GET_FIELD_REG index 1
OP_REG_ASSIGN
ret_naked

-- display --
get_local_REG index 0
OP_GET_FIELD index 0
print
get_local_REG index 0
OP_GET_FIELD index 1
print
ret_naked

-- introduce --
constant index 0, value module for basic geometry
print
ret_naked

-- moveCenter --
get_local_REG index 0
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 0
get_local_REG index 1
OP_GET_FIELD index 0
add_int
get_local_REG index 0
OP_GET_FIELD_REG index 1
OP_GET_FIELD_REG index 0
OP_REG_ASSIGN
get_local_REG index 0
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 1
get_local_REG index 1
OP_GET_FIELD index 1
add_int
get_local_REG index 0
OP_GET_FIELD_REG index 1
OP_GET_FIELD_REG index 1
OP_REG_ASSIGN
get_local_REG index 0
OP_GET_FIELD index 1
OP_RETURN

-- global scope --
OP_EXIT_REPL

//---- simple_str ----

-- concat --
get_local index 1
get_local index 2
OP_STRING_CONCAT
OP_RETURN

-- quote --
constant index 0, value '
get_local index 1
OP_STRING_CONCAT
constant index 1, value '
OP_STRING_CONCAT
OP_RETURN

-- global scope --
OP_EXIT_REPL

//---- test.rv ----

-- main --
OP_GET_GLOBAL_REG index 1, <module geom>
OP_BOUND_IMPORT index 0
constant index 0, value 1
constant index 1, value 90
OP_STRUCT_LIT index 2
get_local index 1
OP_INVOKE arity 0, method index 1
OP_GET_GLOBAL_REG index 1, <module geom>
OP_BOUND_IMPORT index 2
constant index 2, value 10
OP_CAST_TO_FLOAT
get_local index 1
OP_INCR_REF_COUNT
OP_STRUCT_LIT index 2
get_local_REG index 2
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 0
print
get_local_REG index 2
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 1
print
OP_GET_GLOBAL index 0, <module math>
OP_INVOKE arity 0, method index 1
OP_GET_GLOBAL index 0, <module math>
get_local_REG index 2
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 0
get_local_REG index 2
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 1
OP_INVOKE arity 2, method index 2
get_local_REG index 3
OP_GET_FIELD index 0
print
get_local_REG index 3
OP_GET_FIELD index 1
print
OP_PUSH_MODULE index 2
get_local index 4
constant index 3, value local import
OP_INVOKE arity 1, method index 1
print
get_local index 1
OP_INVOKE arity 0, method index 1
get_local index 4
constant index 4, value just 
constant index 5, value concaneted
OP_INVOKE arity 2, method index 0
print
pop
get_local index 2
get_local index 1
OP_INCR_REF_COUNT
OP_INVOKE arity 1, method index 0
get_local index 4
OP_INVOKE arity 0, method index 1
get_local_REG index 2
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 0
print
get_local_REG index 2
OP_GET_FIELD_REG index 1
OP_GET_FIELD index 1
print
ret_naked

-- global scope --
OP_GET_GLOBAL index 2, <fn main>
call index 0
