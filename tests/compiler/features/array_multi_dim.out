//---- array_multi_dim.rv ----

-- getIdx --
constant index 0, value 2
ret

-- main --
constant index 0, value 1
constant index 1, value 2
constant index 2, value 3
array_new index 3
constant index 3, value 4
constant index 4, value 5
constant index 5, value 6
array_new index 3
array_new index 2

constant index 6, value 1
constant index 7, value 2
constant index 8, value 33
array_new index 3
constant index 9, value 3
constant index 10, value 4
constant index 11, value 55
array_new index 3
array_new index 2

get_global index 0, <structure Foo>
constant index 12, value 6
constant index 13, value 7
get_global index 1, <function getIdx>
call index 0
array_new index 3
constant index 14, value 8
constant index 15, value 9
constant index 16, value 1
add_int
constant index 17, value 11
array_new index 3
array_new index 2
struct_lit index 1

constant index 18, value 2
constant index 19, value 1
get_local index 1
OP_ARRAY_ACCESS_CHAIN index 2
print

constant index 20, value 1
neg_int
constant index 21, value 2
neg_int
get_local index 1
OP_ARRAY_ACCESS_CHAIN index 2
print

constant index 22, value 99
get_global index 1, <function getIdx>
call index 0
constant index 23, value 1
neg_int
get_local index 1
OP_ARRAY_ASSIGN_CHAIN index 2

constant index 24, value 1
array_new index 1
get_local index 3
OP_GET_FIELD_REG index 0
get_global index 1, <function getIdx>
call index 0
array_set

constant index 25, value 9
neg_int
constant index 26, value 1
get_global index 1, <function getIdx>
call index 0
get_local index 3
OP_GET_FIELD_REG index 0
OP_ARRAY_ASSIGN_CHAIN index 2

get_local index 3
OP_GET_FIELD_REG index 0
get_global index 1, <function getIdx>
call index 0
array_get
print

constant index 27, value 1
get_global index 1, <function getIdx>
call index 0
get_local index 3
OP_GET_FIELD_REG index 0
OP_ARRAY_ACCESS_CHAIN index 2
print

ret_naked

-- global scope --
get_global index 2, <function main>
call index 0
