-- getIdx --
constant index 0, value 2
ret

-- main --
constant index 0, value 1
constant index 1, value 2
constant index 2, value 3
array_new index 3

constant index 3, value 1
constant index 4, value 2
array_new index 2

load_sym index 0, <structure Foo>
constant index 5, value 6
constant index 6, value 7
load_sym index 1, <function getIdx>
call index 0
array_new index 3
struct_lit index 1

get_local index 0
constant index 7, value 1
array_get
print

get_local index 0
constant index 8, value 2
neg_int
array_get
print

constant index 9, value 99
get_local_cow index 0
load_sym index 1, <function getIdx>
call index 0
array_set

constant index 10, value 9
neg_int
get_local_cow index 2
get_field_cow index 0
load_sym index 1, <function getIdx>
call index 0
array_set

get_local index 2
get_field index 0
load_sym index 1, <function getIdx>
call index 0
array_get
print

constant index 11, value 1
constant index 12, value 1

constant index 13, value 1
constant index 14, value 2
array_new index 2
constant index 15, value 3
constant index 16, value 4
array_new index 2
array_new index 2

constant index 17, value 98
get_local index 4
get_local index 3
get_local_cow index 5
array_set_chain index 2

ret_naked

-- global scope --
load_sym index 2, <function main>
call index 0
