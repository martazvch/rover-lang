-- main --
load_constant index 3, value <enum Marker, tag 2>
load_constant index 4, value <enum Bar, tag 0>

// Pattern match 1
get_local index 0
get_tag

dup
load_constant index 5, value <enum Marker, tag 1>
get_tag
eq_int
jump_false 12 -> 22
pop
load_constant index 6, value circle
print
jump 19 -> 55
pop

dup
load_constant index 7, value <enum Marker, tag 0>
get_tag
eq_int
jump_false 28 -> 38
pop
load_constant index 8, value cross
print
jump 35 -> 55
pop

dup
load_constant index 9, value <enum Marker, tag 2>
get_tag
eq_int
jump_false 44 -> 54
pop
load_constant index 10, value none
print
jump 51 -> 55
pop

pop

// Pattern match 2
get_local index 0
get_tag
dup
load_constant index 11, value <enum Marker, tag 1>
get_tag
eq_int
jump_false 64 -> 74
pop
load_constant index 6, value circle
print
jump 71 -> 107
pop

dup
load_constant index 12, value <enum Marker, tag 0>
get_tag
eq_int
jump_false 80 -> 90
pop
load_constant index 8, value cross
print
jump 87 -> 107
pop

dup
load_constant index 3, value <enum Marker, tag 2>
get_tag
eq_int
jump_false 96 -> 106
pop
load_constant index 10, value none
print
jump 103 -> 107
pop

pop

// Pattern match 3
get_local index 0
get_tag
dup
load_constant index 11, value <enum Marker, tag 1>
get_tag
eq_int
jump_false 116 -> 125
pop
load_constant index 13, value 1
jump 122 -> 167
pop

dup
load_constant index 12, value <enum Marker, tag 0>
get_tag
eq_int
jump_false 131 -> 140
pop
load_constant index 14, value 2
jump 137 -> 167
pop

dup
load_constant index 3, value <enum Marker, tag 2>
get_tag
eq_int
jump_false 146 -> 166
pop
load_constant index 15, value 4
load_constant index 16, value 6
load_constant index 17, value 3
store_blk_val
jump 157 -> 160
pop
pop
load_blk_val
jump 163 -> 167
pop

// Because pattern match is an expression
swap_pop

ret_naked

-- global scope --
load_sym index 2, <function main>
call index 0
