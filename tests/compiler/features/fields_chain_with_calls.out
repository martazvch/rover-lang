// This test shows that when mixing calls with member access, we execute the call
// first and access the first element on top of stack

//---- test.rv ----

-- getPt --
get_global index 0, <structure Point>
constant index 0, value 9
struct_lit index 1
ret

-- getVec --
get_global index 1, <structure Vec2>
get_local index 1
struct_lit index 1
ret

-- main --
get_global index 1, <structure Vec2>
constant index 0, value 1
struct_lit index 1

get_local index 1
OP_INVOKE arity 0, method index 0
OP_REG_PUSH
get_field index 0
print

get_global index 2, <function getVec>
constant index 1, value 5
call index 1
OP_REG_PUSH
get_field index 0
print

ret_naked

-- global scope --
get_global index 3, <function main>
call index 0
