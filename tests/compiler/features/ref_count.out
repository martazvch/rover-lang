//---- test.rv ----

-- incrFirstOnly --
OP_NAKED_RETURN

-- main --
OP_CONSTANT index 0, value 1
OP_ARRAY index 1

OP_GET_LOCAL index 1
OP_INCR_REF_COUNT

OP_GET_GLOBAL index 1, <structure Point>
OP_LOAD_STRUCT_DEF
OP_GET_DEFAULT index 0
OP_GET_GLOBAL index 0, <structure Foo>
OP_LOAD_STRUCT_DEF
OP_GET_DEFAULT index 0
OP_STRUCT_LIT index 1
OP_ARRAY index 1
OP_STRUCT_LIT index 2

OP_GET_GLOBAL index 2, <structure Poly>
OP_GET_LOCAL index 3
OP_INCR_REF_COUNT
OP_STRUCT_LIT index 1

OP_GET_GLOBAL index 3, <fn incrFirstOnly>
OP_GET_LOCAL index 3
OP_GET_LOCAL_REG index 3
OP_GET_FIELD index 0
OP_CALL index 2

OP_GET_GLOBAL index 3, <fn incrFirstOnly>
OP_GET_LOCAL_REG index 4
OP_GET_FIELD index 0
OP_GET_LOCAL_REG index 4
OP_GET_FIELD_REG index 0
OP_GET_FIELD index 0
OP_CALL index 2

OP_CONSTANT index 1, value 1
OP_ARRAY index 1
OP_CONSTANT index 2, value 2
OP_ARRAY index 1
OP_ARRAY index 2

OP_GET_LOCAL_REG index 5
OP_CONSTANT index 3, value 1
OP_ARRAY_ACCESS
OP_INCR_REF_COUNT

OP_GET_GLOBAL index 1, <structure Point>
OP_LOAD_STRUCT_DEF
OP_GET_DEFAULT index 0
OP_GET_GLOBAL index 0, <structure Foo>
OP_LOAD_STRUCT_DEF
OP_GET_DEFAULT index 0
OP_STRUCT_LIT index 1
OP_ARRAY index 1
OP_STRUCT_LIT index 2
OP_ARRAY index 1

OP_GET_GLOBAL index 1, <structure Point>
OP_LOAD_STRUCT_DEF
OP_GET_DEFAULT index 0
OP_GET_GLOBAL index 0, <structure Foo>
OP_LOAD_STRUCT_DEF
OP_GET_DEFAULT index 0
OP_STRUCT_LIT index 1
OP_ARRAY index 1
OP_STRUCT_LIT index 2
OP_ARRAY index 1

OP_ARRAY index 2

OP_CONSTANT index 4, value 0
OP_CONSTANT index 5, value 1
OP_GET_LOCAL_REG index 7
OP_ARRAY_ACCESS_CHAIN index 2
OP_INCR_REF_COUNT

OP_GET_LOCAL_REG index 4
OP_GET_FIELD_REG index 0
OP_GET_FIELD index 1
OP_INCR_REF_COUNT

OP_GET_LOCAL_REG index 4
OP_GET_FIELD_REG index 0
OP_GET_FIELD_REG index 1
OP_CONSTANT index 6, value 0
OP_ARRAY_ACCESS
OP_INCR_REF_COUNT

OP_GET_LOCAL_REG index 4
OP_GET_FIELD_REG index 0
OP_GET_FIELD_REG index 1
OP_CONSTANT index 7, value 0
OP_ARRAY_ACCESS_REG
OP_GET_FIELD index 0

OP_GET_LOCAL_REG index 8
OP_GET_FIELD_REG index 1
OP_CONSTANT index 8, value 0
OP_ARRAY_ACCESS
OP_INCR_REF_COUNT

OP_NAKED_RETURN

-- global scope --
OP_GET_GLOBAL index 4, <fn main>
OP_CALL index 0
