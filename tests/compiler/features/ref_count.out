//---- test.rv ----

-- display --
constant index 0, value Point
print
get_local index 0
get_field index 0
print
get_local index 0
get_field index 1
print
constant index 1, value 
print
ret_naked

-- clone --
get_global index 1, <structure Poly>
get_global index 0, <structure Point>
constant index 0, value 1
constant index 1, value 2
struct_lit index 2
struct_lit index 1
ret

-- testFn --
ret_naked

-- main --
get_global index 0, <structure Point>
constant index 0, value 2
constant index 1, value 6
struct_lit index 2

get_global index 1, <structure Poly>
get_local index 1
OP_INCR_REF_COUNT
struct_lit index 1

get_global index 2, <structure Structure>
get_local index 2
OP_INCR_REF_COUNT
get_local index 2
OP_INCR_REF_COUNT
array_new index 1
struct_lit index 2

get_local index 1
OP_INCR_REF_COUNT

get_local index 3
get_field index 0
OP_INCR_REF_COUNT

get_local index 3
OP_GET_FIELD_REG index 0
get_field index 0
OP_INCR_REF_COUNT

get_local index 3
get_field index 1
OP_INCR_REF_COUNT

get_local index 3
OP_GET_FIELD_REG index 1
constant index 2, value 0
array_get
OP_INCR_REF_COUNT

get_local index 3
OP_GET_FIELD_REG index 1
constant index 3, value 0
OP_ARRAY_ACCESS_REG
get_field index 0
OP_INCR_REF_COUNT

get_local index 3
OP_GET_FIELD_REG index 1
constant index 4, value 0
OP_ARRAY_ACCESS_REG
OP_GET_FIELD_REG index 0
get_field index 0

get_local index 1
OP_INCR_REF_COUNT
array_new index 1

get_local index 3
OP_GET_FIELD_REG index 0
get_field index 0
OP_INCR_REF_COUNT
array_new index 1

get_local index 3
get_field index 0
OP_INVOKE arity 0, method index 0

get_local index 3
get_field index 0
OP_INVOKE arity 0, method index 0
OP_REG_PUSH
get_field index 0
OP_INCR_REF_COUNT

get_local index 3
get_field index 0
OP_INVOKE arity 0, method index 0
OP_REG_PUSH
OP_GET_FIELD_REG index 0
get_field index 0

get_global index 3, <function testFn>
get_local index 1
get_local index 3
get_field index 0
get_local index 3
call index 3
ret_naked

-- global scope --
get_global index 4, <function main>
call index 0
